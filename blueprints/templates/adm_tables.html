{% extends "layout_admin.html" %}
{% block content %}
<div
  class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  
  <h6 class="text-secondary border-bottom border-top mb-0">
    {{ table_mode }}
  </h6>

  <form action="" method="POST">
    <div class="form-group form-row flex-nowrap">
      {{select_table.mode(class=" custom-select custom-select-sm shadow-lg border-0")}}
      {{select_table.submit(class="btn btn-sm btn-sm btn-primary shadow-lg")}}
    </div>
  </form>
</div>


{% if table_mode == 'Show Members' %}
<div class="container text-center" name="pagination-members">
{% for page_num in members.iter_pages(left_edge=5, right_edge=5, left_current=5, right_current=10) %}
{% if page_num %}
{% if members.page == page_num %}
  <a class="btn btn-outline-secondary mb-4 shadow-lg border-secondary text-lg" href="{{ url_for('admins.dashboard', page_m=page_num, ) }}">
    {{ page_num }}
  
  </a>
  {% else %}
  <a class="btn btn-sm btn-secondary btn-sm border-0 shadow mb-4" href="{{ url_for('admins.dashboard', page_m=page_num) }}">{{ page_num }}</a>
  {% endif %}
{% else %}
...
{% endif %}
{% endfor %}

</div>      

{% elif table_mode=='Show Users' %}

<div class="text-center" name="pagination-users">
{% for page_num in users.iter_pages(left_edge=5, right_edge=5, left_current=5, right_current=10) %}
{% if page_num %}
{% if users.page == page_num %}

  <a class="btn btn-outline-secondary mb-4 shadow-lg border-secondary text-lg" href="{{ url_for('admins.dashboard', table_mode=1, page_u=page_num,) }}">
    {{ page_num }}
  
  </a>

  {% else %}
  <a class="btn btn-sm btn-secondary btn-sm border-0 shadow mb-4" href="{{ url_for('admins.dashboard', table_mode=1, page_m=1,page_u=page_num) }}">{{ page_num }}</a>
  {% endif %}

{% else %}
...
{% endif %}
{% endfor %}

</div>      

{% endif %}

<div class="table-responsive">
  <table class="table table-striped table-sm table-hover">

    <thead class="thead-inverse border-top border-light">
        <tr>
        {% for hdr_icon,th in headers %}
        
        <th class="text-nowrap text-comfo py-3"> 
          <i class="fa{{hdr_icon }}"></i>
          {{th}} 
        </th>
        
        {% endfor %} 
      
        </tr>
    </thead>
    <tbody>
    
      {% for row in table %}
        <tr class=" align-items-base">
        {% set rowloop = loop %}
        {% for k,v in row.items() %}

          {% if k =="img_url" %}
          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
            
            <img class="img-thumbnail border-0 add-anime rnd-lg py-0 opac-50 rounded-circle" src="{{ v }}" alt="img"
            style="max-height: 1.75rem;"
            >
          </td>
          
          

          {% elif k in [ "linkedin", "twitter", "instagram",] %}

          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
          <a class="opac-70" href="{{row[k]}}">
            
            <i class="text-lg fab fa-{{k}}" aria-hidden="true"></i>

          </a>

          </td>
          
          

          {% elif k in [ "first_name", "last_name", "middle_name",] %}


          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
            {{v.title()}}
          </td>
          

          {% elif k in [ "is_admin", "is_prez"] %}
          {% set icon_dict = {
            'y' : 'check',
            'n' : 'times',
          } %}


          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
            
            <i class="fas fa-{{  icon_dict[v] }}"></i>


          </td>
          

          {% elif k ==  "gender" %}
          {% set gender_dict = {
            'f' : 'female',
            'm' : 'male',
          } %}


          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
            
            <i class="fas fa-{{  gender_dict[v] }}"></i>


          </td>
          
          
          {% else %}
          
          <td id="cell-{{ rowloop.index }}-{{ loop.index }}">
            {{ v }}
          </td>
          
          {% endif %}

        {% endfor %}
        </tr>
      {% endfor %}
    </tbody>

  </table>  
</div>
{% endblock %}
