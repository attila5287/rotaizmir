{% extends "layout.html" %}
{% block content %}
<a class="mini btn btn-outline-secondary btn-block shadow mb-3 py-2 text-bold opac-70" type="button" href="/a/t/u">
  
  <h4 class="fas fa-table align-self-center text-secondary">
    <i class="text-lg text-nonbold">
      show all <strong>users</strong> in table
    </i>
  </h4>

</a>

<div class="d-flex flex-row" name="reqnotes-legend">
    <nav class="nav nav-fill col-8 offset-2">

      {% set table_legend = [
('decline request','gavel', 'danger', ), 
('note for board', 'sticky-note', 'secondary', ),
('pending review', 'balance-scale', 'info', ),
('approve request','stamp', 'primary', ),
]  %}

      {% for info,icon,style in table_legend %}

      <li class="nav-item text-italic text-sm">
        <a class="nav-link disabled mb-0">
          <button class="btn btn-{{style}} p-1 mb-0" type="button">
            <i class="fas fa-{{icon}} fa-fw"></i>
          </button>
        </a>
        {{info}}
      </li>

      {% endfor %}

    </nav>
  </div>
  <div class="d-flex flex-row" name="table-legend">
    <nav class="nav nav-fill col-8 offset-2">

      {% set table_legend = [
      ('admin','user-md', 'primary', ), 
      ('member','user-check', 'primary', ), 
      ('prez','user-graduate', 'primary', ), 
      ]  %}

      {% for info,icon,style in table_legend %}

      <li class="nav-item text-italic text-sm">
        <a class="nav-link disabled mb-0">
          <button class="btn btn-{{style}} p-1 mb-0" type="button">
            <i class="fas fa-{{icon}} fa-fw"></i>
          </button>
        </a>
        {{info}}
      </li>

      {% endfor %}

    </nav>
  </div>


{% for user_id, user_requests in disp_reqs.items() %}
<div class="mini" name="requests-notes">
  
  <div class="d-flex flex-row justify-content-between mb-2">
    
    <a class="btn btn-outline-primary border-0 btn-sm p-1" href="/a/t/u">
      View Users
    </a>

    <span >
      <h6 class="fas fa-user opac-60 border-bottom">
      <h6 class="fas fa-hashtag opac-60 border-bottom">
        
        {{user_id}}</h6>
    </span>
    
    <a class="btn btn-outline-primary btn-sm border-0 p-1" href="/a/a/r">
      <i class="fas fa-table text-md" data-toggle="tooltip" data-placement="bottom" title="go back to table-only view"></i>
    </a>

  </div>
  
  
  {% for category, sorted in user_requests.items() %}
  {% if category %}
  {% for obj in sorted %}
  {% if obj.type == 'req' %}
  
  {% set req = obj  %}
  
  <div class="media mt-2 rnd-xl p-0 add-anime shadow">
    <h1
      class="fa{{icons(req.category)}} txt-shd text-center  align-self-center opac-30 mx-4">
    </h1>
    
    <div class="media-body pb-2 pt-0"
    style="vertical-align: middle;">
    <div class="d-flex flex-row justify-content-between">
      <h6 class="mt-2 opac-70 border-bottom border-med ">
    User ID
    <i class="text-bold text-nonitalic"># {{req.user_id}}</i>
    's  <strong class="text-italic">{{req.category}}</strong>
    request message
  </h6>
    <a href="/delete/req/{{req.id}}" class="fas fa-times text-danger text-xl text-shd opac-70 shadow-sm mt-2 mr-3">
    </a>

    </div>

    {% set  user_req_set = [
      ('text-2xl mr-4', 'text-md rnd-lg border-bottom border-med pb-2 mb-2 mr-3 shadow-sm', 'req_content', req.content,),
      ('text-lg mr-4', 'text-sm ', 'date_posted', req.date_posted.date(),),
      ('text-lg mr-4', 'text-sm ', req.status, req.status,),
      ]  %}
  
      {% for icon_style, style, attr, req_attr in user_req_set %}
      <p class="text-italic pl-2 mb-1 {{style}}">
        <i class="fa{{icons(attr)}} {{icon_style}} fa-fw"></i>{{req_attr}}  
      </p>
      
      {% endfor %}
  </div>
    
  
      
  </div>
  {% else %}

  {% set note = obj %}
  <div class="media mt-4 rnd-xl p-1 offset-2 anim-shd ">
    <h1 class="fa{{icons(note.status)}} text-{{styles(note.status)}} txt-shd opac-80 fa-pull-left align-self-center mr-4 ml-3"></h1>
    
    <div class="media-body text-{{styles(note.status)}}" style="vertical-align: middle;">
      <div class="d-flex flex-row justify-content-between">
        <h6 class="mt-0 border-bottom border-{{styles(note.status)}} opac-50">Admin ID#
          {{note.admin_id}} noted:</h6>
          <a href="/delete/note/{{note.id}}">
            <h5 class="far fa-times-circle text-{{styles(note.status)}} fa-pull-right text-shd opac-70">
            </h5>
          </a>        
      </div>
    {% set  adm_note_set = [
      ('text-2xl mr-4', 'text-md pb-2 ', 'note_content', note.content,),
      ('text-lg mr-4', 'text-sm ', 'date_posted', note.date_posted.date(),),
      ('text-lg mr-4', 'text-sm ', note.status, note.status,),
      ]  %}
  
      {% for icon_style, style, attr, req_attr in adm_note_set %}
      <p class="text-italic pl-2 mb-1 {{style}}">
        <i class="fa{{icons(attr)}} {{icon_style}} fa-fw"></i>{{req_attr}}  
      </p>
      
      {% endfor %}


      
      </i>
    </div>

  </div>
  {% endif %}
  {% endfor %}
  {% endif %}
  
  {% endfor %}

</div>
{% endfor %}

{% endblock %}
