{% extends "layout.html" %}
{% block content %}
{% if form.errors %}
<div class="mini errors rnd-xl border-danger">
    {% for field_name, field_errors in form.errors|dictsort if field_errors %}
    {% for error in field_errors %}
    <div class="w-75 opac-90 px-2 py-1 alert alert-info content-section add-anime border-0 alert-dismissible fade show rnd-xl"
        role="alert">
        <i
            class="text-3xl text-theme fas fa-exclamation fa-pull-left animated infinite heartBeat  rnd-sm mt-3 ml-3 mr-3"></i>
        <p
            class="text-comfo text-info text-italic text-md text-bold border-neg my-0 px-0 pt-1 pb-0 mb-0 ml-3 pl-3  w-50 rnd-2xl">
            <i
                class="text-info fa {{ icons(form[field_name].id) }} fa-fw p-0 m-0"></i>
            {{ form[field_name].label }}
        </p>
        <blockquote class="blockquote text-bold text-left ml-4">
            <footer class="blockquote-footer text-italic text-info ">
                {{ error }}</footer>
        </blockquote>
        <button type="button" class="close text-2xl" data-dismiss="alert"
            aria-label="Close">
            <i class="fas fa-times text-theme"></i>
        </button>
    </div>
    {% endfor %}
    {% endfor %}
</div>
{% endif %}

<div class="mini">
    <h3>{{user.username}}
    </h3>
    <p class="text-lg mb-0">
        <i class="far fa-envelope mr-2 text-xl"></i>
        {{user.email}}
    </p>
</div>
<hr class="mini border-med my-0 mx-3">
<div class="mini form-group row mt-0">
    <div class="form-group col-4">
        <p class="mb-0">
            <i class="fas fa-user"></i>
            <i class="fas fa-hashtag"></i>
            {{user.id}}
        </p>
        <img src="https://raw.githubusercontent.com/attila5287/rota-img/main/avatars/{{user.img_url}}.png"
            alt="usr-img" class="img rounded-circle">

    </div>
    <fieldset class="form-group col-8">
        
        <form method="POST" action="">

            {{ form.hidden_tag() }}
            <select id="status" name="status"
                class="select_topic selectpicker form-control mb-3"
                data-search_term="usr_{{user_id}}_{{category}}">
                <option value="" data-content="<i class='fas fa-sign text-2xl py-0 my-0 fa-fw bg-primary p-1 rnd-lg text-light' aria-hidden='true'> 
                      <i class='text-nonbold text-mntsrt text-lg pl-2 my-0 py-0 text-primary'> 
                        select-a-topic
                      </i>
                    </i>
                  " selected disabled>
                </option>
                <option class="dropdown-divider my-0 pt-0 pb-1 bg-primary opac-60" value="" disabled></option>
                {% set options = [
                    ('Members', 'is_member', 'user-check', 'primary', '',  ),
                    ('AdmBoard', 'is_admin', 'user-md', 'secondary', '',  ),
                    ('PrezBoard', 'is_prez', 'user-graduate', 'info', '',  ),
                    ('PublicPosts', 'is_prez', 'users', 'danger', '',  ),
                    ]  %}


                {% for  topic, status, icon,style, tooltip in options %}
                

                {% if user[status] == 'y' %}
                    <option class="" value="{{status}}" data-content="<i class='fas fa-{{icon}} fa-fw text-{{style}} text-xl pl-2 mt-0 pt-0' aria-hidden='true'> 
                    </i>
                            <i class='ml-2 text-monts   text-nonitalic text-capitalize text-lg mt-0'> 
                              {{topic}}
                          </i>
                          <i class='fas fa-check text-italic text-{{style}} ml-3 pl-3'> {{status}}</i>
    
                        </i>
                      ">
                      {% else %}
                        <option class="" value="" data-content="<i class='fas fa-{{icon}} fa-fw text-xl pl-2 mt-0 pt-0 opac-40' aria-hidden='true'> 
                        </i>
                                <i class='ml-2 text-monts   text-nonitalic text-capitalize text-lg mt-0'> 
                                  {{topic}}
                              </i>
                              <i class='fas fa-times text-italic opac-40 ml-3 pl-3'> {{status}}</i>
        
                            </i>
                          " disabled>

                          {% endif %}                  
                        </option>


                {% endfor %}

            </select>

            <hr class="mx-2 mt-1 mb-2 border-primary">
            
            {% for field in form %}
            {% if field.id == 'csrf_token' %}

            {% elif field.id == 'submit' %}
            <div class="form-row align-items-center mt-4">
                {{field(class="btn btn-primary border-0 btn-block py-2 text-lg shadow" )}}

            </div>

            {% else %}
            <div class="form-row align-items-center mb-4">

                <div class="col-2">
                    <p
                        class="text-monts text-sm text-bold text-secondary text-right my-0">
                        {{field.label}}
                    </p>
                </div>
                <div class="col">
                    <div
                        class="input-group mx-2 mb-0 text-comfo bg-transparent border-0">
                        <div
                            class="input-group-prepend add-anime bg-transparent rnd-xl border-0">
                            <span
                                class="input-group-text bg-secondary text-light text-lg"
                                id="inputGroupPrepend">
                                <i
                                class="fa{{icons(field.id)}} fa-fw ml-2 mt-0"></i>
                            </span>
                        </div>
                        {{field(class="form-control form-control-sm mb-0 shadow mr-2" )}}
                    </div>
                </div>
            </div>

            {% endif %}

            {% endfor %}
        </form>
    </fieldset>
</div>
{% endblock content %}
