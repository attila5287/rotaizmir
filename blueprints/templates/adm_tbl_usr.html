{% extends "layout.html" %}
{% block content %}

<div class="text-center" name="pagination-users">
{% for page_num in users.iter_pages(left_edge=5, right_edge=5, left_current=5, right_current=10) %}
{% if page_num %}
{% if users.page == page_num %}

  <a class="btn btn-outline-secondary mb-4 shadow-lg border-secondary text-lg" href="{{ url_for('admins.users_table',  page=page_num,) }}">
    {{ page_num }}
  
  </a>

  {% else %}
  <a class="btn btn-sm btn-secondary btn-sm border-0 shadow mb-4" href="{{ url_for('admins.users_table', page=page_num) }}">{{ page_num }}</a>
  {% endif %}

{% else %}
...
{% endif %}
{% endfor %}
</div>      

<div class="table-responsive" name="table-usr">
  <table class="table table-striped table-sm table-hover">

    <thead>
        <tr>
        {% for header in headers %}

        {% if header in [ 'phone_num', 'email', 'img_url', 'image_file', ]  %}
        
        <th class='bg-primary text-light py-3 text-center'> 
            <i class='text-xl fa{{icons(header)}}' aria-hidden='true'></i>
          </th>        
          
        {% else %}

          <th class='bg-primary text-light py-3 text-center'> 
            {{ header.title().replace('_',' ') }} 
          </th>

        {% endif %}
        {% endfor %} 
        
        </tr>
    </thead>
    <tbody>
    
      {% for user in table %}
        <tr class=" align-items-base"> 
        {% set rowloop = loop %}
        {% for k,v in user  .items() %}

          {% if k =="image_file"  %} 
          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}" >
            
            <img class="img-thumbnail border-0 add-anime rnd-lg py-0 opac-50 rounded-circle" src="https://raw.githubusercontent.com/attila5287/rota-img/main/profile_pics/{{v}}" alt="img"
            style="max-height: 1.75rem;"
            >
          </td>
          

          {% elif k =="img_url" %}
          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
            
            <img class="img-thumbnail border-0 add-anime rnd-lg py-0 opac-50 rounded-circle" src="https://raw.githubusercontent.com/attila5287/rota-img/main/avatars/{{v}}.png" alt="img"
            style="max-height: 1.75rem;"
            >
          </td>
          
          

          {% elif k in [ "linkedin", "twitter", "instagram",] %}

          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
          <a class="opac-70" href="{{user[k]}}">
            
            <i class="text-lg fab fa-{{k}}" aria-hidden="true"></i>

          </a>

          </td>

          {% elif k in [ "is_member", "is_admin", "is_prez"] %}
          {% set icon_dict = {
            'y' : 'check',
            'n' : 'times',
          } %}


          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
            
            <i class="fas fa-{{  icon_dict[v] }}"></i>


          </td>
          

          {% elif k ==  "gender" %}
          {% set gender_dict = {
            'f' : 'female',
            'm' : 'male',
          } %}

          <td class="align-items-center"
          id="cell-{{ rowloop.index }}-{{ loop.index }}">
            <i class="fas fa-{{  gender_dict[v] }}"></i>
          </td>
          

          {% elif k ==  "password" %}
          
          
          {% else %}
          
          <td id="cell-{{ rowloop.index }}-{{ loop.index }}">
            {{ v }}
          </td>
          
          {% endif %}

          {% endfor %}
            <td class="text-nowrap text-comfo py-3"> 

              {% if not user.is_member == 'y' %}
              <span>
                <a href="{{url_for('admins.approve_member', id= user.id)}}">
                  <i class="fas fa-user-plus text-lg opac-80"></i>
                </a>
              </span>
              {% else %}
              <span>
                  <i class="fas fa-check-double text-lg opac-50"></i>
              </span>
              {% endif %}

            </td>
        </tr>
      {% endfor %}
    </tbody>

  </table>  
</div>

{% endblock %}
